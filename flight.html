<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="bootstrap-5.3.0-alpha3-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style2.css">
    <link rel="stylesheet" href="css/search.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <script src="bootstrap-5.3.0-alpha3-dist/js/jquery-3.7.0.min.js"></script>
    <!-- <script src="js/script.js"></script> -->
    <script src="bootstrap-5.3.0-alpha3-dist/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="bootstrap-5.3.0-alpha3-dist/js/bootstrap.bundle.min.js"></script>

    <div id="loading">
        <div class="spinner"></div>
      </div>
      <script>
        window.addEventListener('load', () => {
          setTimeout(() => {
              document.getElementById("loading").style.display = "none";
            }, 1000); 
      });
      </script>

<header>
    <nav id="header-nav" class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header">
                <a href="first.html" class="visible-md visible-lg">
                    <img id="logo-img" class="img-fluid visible-lg" src="css\logo.jpg" alt="logo-img">
                </a>
            </div>
            <div class="navbar-brand ">
                <a href="first.html"><h1>Online Reservation</h1></a>
            </div>
        </div>
       
        <div id="header-menu">
            <ul id="nav-list" class="nav navbar-nav">
                <li> <a href="first.html"><p><i class="fa fa-home icon-3x"></i> <br class="hidden-xs"> HOME </p> </a></li>
                <li> <a href="flight.html"><p><i class="fa fa-plane"></i><br class="hidden-xs"> FLIGHT</p></a></li>
                <li><a href="train.html"><p><i class="fa fa-train"></i><br class="hidden-xs"> TRAIN</p></a></li>
                <li><a href="hotel.html"><p><i class="fa fa-hotel"></i><br class="hidden-xs"> HOTEL</p></a></li>
                <li><a href="suite.html"><p><i class="fa fa-building"></i><br class="hidden-xs"> SUITE</p></a></li>
                <li><p><i class="fa fa-info-circle" onclick="scrollToFooter()"></i><br class="hidden-xs"> ABOUT</p></li>
            </ul>
        </div>   
    </nav>
</header>
<div id="main-content" class="container">
    <form>
        <div class="row">
            <div class="col-md-6 col-sm-6 col-xs-12">
                <label for="origin" class="form-label">From:</label>
                <input type="text" id="origin" name="origin" class="form-control" placeholder="Origin city" required>
            </div>
            <div class="col-md-6 col-sm-6 col-xs-12">
                <label for="destination" class="form-label">To:</label>
                <input type="text" id="destination" name="destination" class="form-control" placeholder="Destination city" required>
            </div> 
            <div class="col-md-6 col-sm-12 col-xs-12">
                <div class="row">
                    <div class="col-md-6 col-sm-6">
                        <label for="depart" class="form-label">Depart:</label>
                        <input type="date" id="depart" name="depart" class="form-control" required>
                    </div>
                    <div class="col-md-6 col-sm-6">
                        <label for="return" class="form-label">Return:</label>
                        <input type="date" id="return" name="return" class="form-control">
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-sm-12 col-xs-12">
                <div class="row">
                    <div class="col-md-6 col-sm-6">
                        <label for="adults" class="form-label">Adults:</label>
                        <input type="number" id="adults" name="adults" class="form-control" min="1" max="10" value="1" required>
                    </div>
                    <div class="col-md-6 col-sm-6">
                        <label for="children" class="form-label">Children:</label>
                        <input type="number" id="children" name="children" class="form-control" min="0" max="10" value="0" required>    
                    </div>
                </div>
            </div>
            <div class="col-12 d-flex justify-content-center">
                <button id="searchbut" type="submit" class="search">Search</button>
            </div>
        </div>
    </form>
    <script>
        const ticket=[
{
    id: 1,
    vehicle: 'plane',
    origin: 'Mashhad',
    destination: 'Tehran',
    date:new Date('2023-06-06') ,
    time: '16:30',
    title: 'Iran Air',
    capacity: 200,
    price: 1200000
},
{
    id: 1,
    vehicle: 'plane',
    origin: 'Yazd',
    destination: 'Isfahan',
    date:new Date('2023-06-11') ,
    time: '11:30',
    title: 'Aseman Airlines',
    price: 900000
},
{
    id: 1,
    vehicle: 'plane',
    origin: 'Tehran',
    destination: 'Shiraz',
    date: new Date('2023-06-11') ,
    time: '20:00',
    title: 'Caspian Airlines',
    price: 1400000
}
]
const tickets = [...new Set(ticket.map((item)=> {return item}))]
var myButton = document.getElementById("searchbut");
myButton.addEventListener("click", function(e) {
    e.preventDefault(); 
    const origin = document.getElementById('origin').value;
    const destination = document.getElementById('destination').value;
    const departDate = document.getElementById('depart').value;
    const returnDate = document.getElementById('return').value;
    const adults = parseInt(document.getElementById('adults').value);
    const children = parseInt(document.getElementById('children').value);
    myButton.style.backgroundColor = "red";
    
    const outboundFlights = ticket.filter((item) => {
        return (
          item.origin.toLowerCase() === origin.toLowerCase() &&
          item.destination.toLowerCase() === destination.toLowerCase() &&
          item.date === departDate &&
          item.capacity >= (adults + children)
        );
    });
    displayItem(outboundFlights);

    if (returnDate !== '') {
        const inboundFlights = ticket.filter((item) => {
            return (
                item.origin.toLowerCase() === destination.toLowerCase() && 
                item.destination.toLowerCase() === origin.toLowerCase() &&
                item.date === returnDate &&
                item.capacity >= (adults + children)
            );
        });
        displayItem(inboundFlights);
    } else {
        document.getElementById('results').innerHTML = '<p>No results found.</p>';
    }
});

const displayItem = (items)=>{
    document.getElementById('results').innerHTML=items.map((item)=>{
        var{title,origin,destination,price}=item;
        return(
            `<div class='box'>
                <h2>${title}</h2>
                <p>${origin}</p>
                <p>${destination}</p>
                <p>${price} Toman</p>
            </div>`
        )
    }).join('')
};



    </script>
    <div class="data">
        <div id="results"></div>
    </div>



</div>
</body>
</html>